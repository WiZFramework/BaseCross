<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>BaseCrossドキュメント(2016年)</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<div id="header">
<h2>０．シンプルバージョンサンプル</h2>
</div>
<!-- コンテンツ　-->
<div id="contents">
<br/>
<h3>００６．テクスチャ付き四角形のフェード処理</h3>
　このサンプルは<b>SimplSample006</b>というディレクトリに含まれます。<br />
　<b>BaseCrossDx12.sln</b>というソリューションを開くと<b>Dx12版</b>が起動します。<br />
　<b>BaseCrossDx11.sln</b>というソリューションを開くと<b>Dx11版</b>が起動します。<br />
<br />
　どちらのソリューションでも、実行結果は以下のような画面が出ます。
<p>&nbsp;</p>
<img src="img/0006a.png" width="80%"/>
<p>図0006a</p>
<p>&nbsp;</p>
<br/>
　動画は以下になります。
<p>&nbsp;</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AAqR4rKQ4ps?rel=0" frameborder="0" allowfullscreen></iframe>
<p>&nbsp;</p>


<h3>【共通解説】</h3>
　Dx12、Dx11両方に共通なのは<b>シェーダー</b>です。<b>DxSharedプロジェクト</b>内に<b>シェーダファイル</b>というフィルタがあり、そこに記述されてます。<br />
　今回使用するシェーダは<b>頂点シェーダとピクセルシェーダ</b>です。<b>VertexPositionTexture型</b>の頂点を持ち、<b>コンスタントバッファ</b>からの入力で、位置を変更させています。<br />
　またテクスチャも描画します。<br />
<br />
　今項のサンプルは前項のサンプルと大きく変わったところはありません。今項は、<b>ディフューズ色</b>を変更することによって、オブジェクト全体を半透明にする処理をしています。<br />
<br />
<h3>【Dx12版解説】</h3>
　<b>BaseCrossDx12.sln</b>を開くと、<b>BaseCrossDx12</b>というメインプロジェクトがあります。この中の<b>Character.h/cpp</b>が主な記述個所になります。<br />
<br/>
<h4>■初期化■</h4>
　初期化処理は前項と変わりありません。変更する<b>ディフューズ色</b>のための変数<b>m_Diffuse</b>を持ち、経過時間を<b>m_TotalTime</b>に持ちます。そして更新時に<b>m_Diffuse</b>に<b>m_TotalTimeをサイン計算</b>することで、透明になったり、ならなかったりを繰り返す処理をしています。<br />
<br />
<h4>■更新処理■</h4>
　<b>更新処理</b>は、<b>SquareSprite::OnUpdate()関数</b>で実装されます。左右に移動しながら、中心からの距離が一定以上になれば逆向きに移動する形です。回転も移動方向に応じて別の回転をかけています。<br />
　その際、<b>m_Diffuse</b>を動的に変更します。<b>m_Diffuse</b>はシェーダに渡されます。<br />

　この処理は<b>Dx11版</b>も変わりません。<br />
<br />
<h4>■描画処理■</h4>
　前項のサンプルと変わりません。<br />
<br />
　以上、Dx12側の説明は終わりです。<br/>
<br />
<h3>【Dx11版解説】</h3>
　<b>BaseCrossDx11.sln</b>を開くと、<b>BaseCrossDx11</b>というメインプロジェクトがあります。この中の<b>Character.h/cpp</b>が主な記述個所になります。<br />
<br />
<h4>■初期化■</h4>
　<b>Dx11版</b>の初期化は<b>SquareSprite::OnCreate()関数</b>に記述があります。ここでは<b>メッシュリソースとテクスチャリソース</b>を作成し、スケーリングなど各パラメータを初期化して終了です。<br />
　変更する<b>ディフューズ色</b>のための変数<b>m_Diffuse</b>と経過時間に<b>m_TotalTime</b>に持ちます。<br />
<br />
<h4>■更新処理■</h4>
　更新処理は<b>Dx12版</b>と変わりありませんのでそちらの説明を参照ください。<br />
<br />
<h4>■描画処理■</h4>
　前項のサンプルと変わりません。<br />
<br />
　以上で<b>Dx11版</b>の実装は終わりです。<br />
<br />
<h3>【まとめ】</h3>
　今項のサンプルは<b>サンプル</b>として独立させるには、前項の内容と被るところが多く、ちょっともったいないかとは思います。<br />
　ポイントは<b>ディフューズ色</b>を使った半透明化アニメーションというわけですが、もう少しエフェクトなどで使えるサンプルを用意すればよかったかなと思います。ざっと実行だけ確認していただければいいかと思います。
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<ul class="foot_navi">
<li><a href="00_05.html">前へ</a></li>
<li><a href="index.html">目次</a></li>
<li><a href="00_07.html">次へ</a></li>
</ul>
<!-- /フッタ　-->


</div>
<!-- /全体コンテナ　-->
</body>
</html>
